@layout("/common/_container.html"){
<script src="${ctxPath}/static/js/plugins/echarts.min.js"></script>
<div class="row">
    <div class="col-sm-12">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <h5>船舶所属国统计</h5>
            </div>
            <div id="shipchart" style="width: 100%;height:380px;"></div>
        </div>
    </div>
</div>


<script>
    // 基于准备好的dom，初始化echarts实例
    var shipChart = echarts.init(document.getElementById('shipchart'));
    function chart(myChart){
        $.ajax({
            contentType : "application/json",
            type : "post",
            url : Feng.ctxPath + "/ShipChart/list/",
            dataType : "json",
            success : function(data) {
                //创建一个数组，用来装对象传给series.data，因为series.data里面不能直接鞋for循环
                var servicedata=[];
                //servicedata=data.split(",");

                shipChart.setOption({
                    title: {
                        left: 'center',
                        top: 20,
                        textStyle: {
                            color: '#ccc'
                        }
                    },
                    tooltip : {
                        trigger: 'item',
                        formatter: "{a} <br/>{b} : {c} ({d}%)"
                    },
                    legend: {
                        orient: 'vertical',
                        x: 'left'
                    },
                    series : [
                        {
                            name:'船舶所属国',
                            type:'pie',
                            radius : '55%',
                            center: ['50%', '60%'],
                            itemStyle: {
                                emphasis: {
                                    shadowBlur: 10,
                                    shadowOffsetX: 0,
                                    shadowColor: 'rgba(0, 0, 0, 0.5)'
                                }
                            },
                            data:data
                        }
                    ]


                });

            }
        });

    }

    chart(shipChart);

</script>
@}